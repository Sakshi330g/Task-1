<% layout("/layouts/boilerplate") %>

<div class="container mt-5">
  <div class="card shadow-sm border-0 rounded-4">
    <div class="img-wrapper">
    <img src="<%= post.image %>" class="card-img-top rounded-top-4 post-img" alt="Post image">
    </div>
    <div class="card-body">
      <h5>@<%= post.author.username %></h5>
      <p><%= post.caption %></p>

      <!-- Likes / Dislikes -->
      <div class="d-flex align-items-center mb-3">
        <form action="/posts/<%= post._id %>/like" method="POST" class="me-3">
          <button class="btn btn-pink rounded-pill">
            üëç <%= likesCount %>
          </button>
        </form>
        <form action="/posts/<%= post._id %>/dislike" method="POST">
          <button class="btn btn-secondary rounded-pill">
            üëé <%= dislikesCount %>
          </button>
        </form>
      </div>

      <!-- Comments -->
      <h6>Comments</h6>
      <% if (comments.length > 0) { %>
      <div class=" card col-3 mb-3 ms-3 mt-3">
        <div class="card-body">
        <% comments.forEach(comment => { %>
          <p class="list-group-item">
            <strong>@<%= comment.author.username %>:</strong> <%= comment.text %>
          </p>
        <% }) %>
      </div>
      </div>
      <% } else { %>
  <p class="text-muted mb-3">No comments yet.</p>
   <% } %>

      <!-- Add Comment Form -->
      <form action="/posts/<%= post._id %>/comments" method="POST">
        <div class="input-group">
          <input type="text" name="text" class="form-control" placeholder="Add a comment..." required>
          <button class="btn btn-pink" type="submit">Comment</button>
        </div>
      </form>

      <a href="/profile" class="btn btn-outline-pink rounded-pill mt-3">Back to Profile</a>
    </div>
  </div>
</div>