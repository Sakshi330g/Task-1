<% layout("/layouts/boilerplate") %>

<div class="container-fluid mt-4">
    <h2 class="text-center mb-4 fw-bold text-dark">Explore Posts</h2>
    <div class="row">

        <% if (posts && posts.length) { %>
            <% posts.forEach(function(post){ %>

                <div class="col-xl-3 col-lg-4 col-md-6 mb-4">
                    <a href="/posts/others/<%= post._id %>" class="text-decoration-none text-dark">

                        <div class="card border-0 shadow-lg rounded-4 h-100 transition-shadow">
                            
                            <% if (post.image) { %>
                                <img
                                    src="<%= post.image %>"
                                    class="card-img-top rounded-top-4"
                                    style="height: 280px; object-fit: cover;"
                                    alt="<%= post.caption %>"  >
                            <% } %>

                            <div class="card-body px-3 py-2">
                                <p class="mb-0 text-truncate fw-normal" title="<%= post.caption %>">
                                    <%= post.caption %>
                                </p>
                            </div>

                            <div class="card-footer bg-white border-0 pt-0 pb-3 d-flex justify-content-between align-items-center">
                                
                                <small class="text-muted">
                                    <% if (post.owner && post.owner.username) { %>
                                        <i class="bi bi-person-fill me-1"></i> Posted by: **<%= post.owner.username %>**
                                    <% } else { %>
                                        <i class="bi bi-person-fill me-1"></i> Unknown User
                                    <% } %>
                                </small>
                                
                                <small class="text-muted">
                                    <i class="bi bi-heart-fill me-1 text-danger"></i> 
                                    <%= post.likesCount || 0 %>
                                </small>
                            </div>

                        </div>

                    </a>
                </div>

            <% }) %>
        <% } else { %>
            <div class="col-12 text-center my-5">
                <i class="bi bi-box-seam text-muted" style="font-size: 3rem;"></i>
                <p class="text-center text-muted mt-3">No posts available to display yet.</p>
            </div>
        <% } %>

    </div>
</div>